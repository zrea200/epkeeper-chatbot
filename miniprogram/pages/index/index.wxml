<!--pages/index/index.wxml-->
<view class="container">
  <view class="header">
    <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
    <text class="title">电管家智能助手</text>
  </view>

  <view class="content">
    <view class="welcome-text">
      <text>欢迎使用电管家智能助手</text>
    </view>

    <view class="auth-section" wx:if="{{!hasUserInfo}}">
      <button 
        class="auth-btn" 
        type="primary" 
        bindtap="getUserProfile"
        wx:if="{{canIUseGetUserProfile}}"
      >
        授权获取用户信息
      </button>
      <view class="tip-text" wx:else>
        请升级微信版本后使用
      </view>
    </view>

    <view class="user-info" wx:if="{{hasUserInfo}}">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <text class="nickname">{{userInfo.nickName}}</text>
    </view>

    <view class="phone-section" wx:if="{{hasUserInfo && !phoneNumber}}">
      <button 
        class="phone-btn" 
        type="primary" 
        open-type="getPhoneNumber"
        bindgetphonenumber="getPhoneNumber"
      >
        授权获取手机号
      </button>
    </view>

    <view class="action-section">
      <button 
        class="enter-btn" 
        type="primary" 
        bindtap="navigateToWebView"
        disabled="{{!hasUserInfo}}"
      >
        进入智能助手
      </button>
      <button 
        class="skip-btn" 
        type="default" 
        bindtap="skipAuth"
      >
        暂不授权，直接进入
      </button>
    </view>
  </view>
</view>

